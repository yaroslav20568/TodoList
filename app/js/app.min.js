window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".todo-list__add button"),t=document.querySelector(".todo-list__add input"),o=document.querySelector(".todo-list__content"),d=JSON.parse(localStorage.getItem("arrayTodos"))||[];function s(e){let t=e.toDateString().split(" ");return`${t[2]} ${t[1]}`}function c(e){return e<0||e<=9?"0"+e:e}function l(){o.innerHTML="",d.forEach((e,t)=>{o.innerHTML+=`\n                <div class="todo">\n                <div class="todo__enumaration">${t+1}.</div>\n                <label class="todo__label" for="checkbox${t+1}">\n                    <input ${e.isChecked?"checked":""} class="todo__checkbox" type="checkbox" id="checkbox${t+1}">\n                    <div class="todo__fake-checkbox"></div>\n                </label>\n                <div class="todo__title">${e.title}</div>\n                <div class="todo__date">${e.date}</div>\n                <div class="todo__time">${e.time}</div>\n                <div class="todo__delete"></div>\n                </div>\n            `});let e=document.querySelectorAll(".todo__label input"),t=document.querySelectorAll(".todo__delete");e.forEach((e,t)=>{e.addEventListener("click",()=>{d[t].isChecked=!d[t].isChecked,l(),localStorage.setItem("arrayTodos",JSON.stringify(d))})}),t.forEach((e,t)=>{e.addEventListener("click",()=>{d.splice(t,1),document.querySelector(".todo").classList.add("todo_hide"),l(),n(),localStorage.setItem("arrayTodos",JSON.stringify(d))})})}function i(){let e=t.value.charAt(0).toUpperCase()+t.value.substr(1).toLowerCase();var o;t.value&&d.push({title:e,isChecked:!1,date:s(new Date),time:(o=new Date,`${c(o.getHours())}:${c(o.getMinutes())}`)}),n(),localStorage.setItem("arrayTodos",JSON.stringify(d))}function n(){0==d.length?(document.querySelector(".message__title").textContent="Увы, список пуст! Заполните его!",document.querySelector(".todo-list__message").classList.remove("hide"),document.querySelector(".todo-list__message").classList.add("show")):(document.querySelector(".message__title").textContent="",document.querySelector(".todo-list__message").classList.remove("show"),document.querySelector(".todo-list__message").classList.add("hide"))}e.addEventListener("click",()=>{i(),t.value&&l(),t.value=""}),window.addEventListener("keypress",e=>{13==e.keyCode&&(i(),t.value&&l(),t.value="")}),document.querySelector("svg").addEventListener("click",e=>{let t=document.querySelector("path");"M13.571 38.155c3.929-2.38 14-5.714 22.858 0"==t.getAttribute("d")?t.setAttribute("d","M13.5699 37H36.4299"):t.setAttribute("d","M13.571 38.155c3.929-2.38 14-5.714 22.858 0")}),l(),n()});