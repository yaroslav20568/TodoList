window.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".todo-list__add button"),t=document.querySelector(".todo-list__add input"),o=document.querySelector(".todo-list__content"),d=document.querySelector(".toggle-theme__checkbox"),c=JSON.parse(localStorage.getItem("arrayTodos"))||[];function s(e){let t=e.toDateString().split(" ");return`${t[2]} ${t[1]}`}function l(e){return e<0||e<=9?"0"+e:e}function a(){o.innerHTML="",c.forEach((e,t)=>{o.innerHTML+=`\n                <div class="todo">\n                <div class="todo__enumaration">${t+1}.</div>\n                <label class="todo__label" for="checkbox${t+1}">\n                    <input ${e.isChecked?"checked":""} class="todo__checkbox" type="checkbox" id="checkbox${t+1}">\n                    <div class="todo__fake-checkbox"></div>\n                </label>\n                <div class="todo__title">${e.title}</div>\n                <div class="todo__date">${e.date}</div>\n                <div class="todo__time">${e.time}</div>\n                <div class="todo__delete"></div>\n                </div>\n            `});let e=document.querySelectorAll(".todo__label input"),t=document.querySelectorAll(".todo__delete");e.forEach((e,t)=>{e.addEventListener("click",()=>{c[t].isChecked=!c[t].isChecked,a(),localStorage.setItem("arrayTodos",JSON.stringify(c))})}),t.forEach((e,t)=>{e.addEventListener("click",()=>{c.splice(t,1),document.querySelector(".todo").classList.add("todo_hide"),a(),i(),localStorage.setItem("arrayTodos",JSON.stringify(c))})})}function n(){let e=t.value.charAt(0).toUpperCase()+t.value.substr(1).toLowerCase();var o;t.value&&c.push({title:e,isChecked:!1,date:s(new Date),time:(o=new Date,`${l(o.getHours())}:${l(o.getMinutes())}`)}),i(),localStorage.setItem("arrayTodos",JSON.stringify(c))}function i(){0==c.length?(document.querySelector(".message__title").textContent="Увы, список пуст! Заполните его!",document.querySelector(".todo-list__message").classList.remove("hide"),document.querySelector(".todo-list__message").classList.add("show")):(document.querySelector(".message__title").textContent="",document.querySelector(".todo-list__message").classList.remove("show"),document.querySelector(".todo-list__message").classList.add("hide"))}function r(){let e=JSON.parse(localStorage.getItem("themeCheckboxValue"));d.checked=e,e?(document.body.classList.remove("body_light"),document.body.classList.add("body_dark")):(document.body.classList.remove("body_dark"),document.body.classList.add("body_light"))}e.addEventListener("click",()=>{n(),t.value&&a(),t.value=""}),window.addEventListener("keypress",e=>{13==e.keyCode&&(n(),t.value&&a(),t.value="")}),document.querySelector("svg").addEventListener("click",e=>{let t=document.querySelector("path");"M13.571 38.155c3.929-2.38 14-5.714 22.858 0"==t.getAttribute("d")?t.setAttribute("d","M13.5699 37H36.4299"):t.setAttribute("d","M13.571 38.155c3.929-2.38 14-5.714 22.858 0")}),a(),i(),r(),d.addEventListener("change",()=>{localStorage.setItem("themeCheckboxValue",d.checked),r()})});